<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Conceptos Básicos de Action Mailbox — Ruby on Rails Guides</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="stylesheets/prism/default.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/prism/rails-guides.css" data-turbolinks-track="reload">
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script src="javascripts/prism.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/turbolinks.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/guides.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/responsive-tables.js" data-turbolinks-track="reload"></script>
  <meta property="og:title" content="Conceptos Básicos de Action Mailbox — Ruby on Rails Guides" />
  <meta name="description" content="NO LEA ESTE ARCHIVO EN GITHUB, LAS GUÍAS SE PUBLICAN EN https://guides.rubyonrails.org.Conceptos Básicos de Action MailboxEste guía le proporciona todo lo que necesita para comenzar a recibir correos electrónicos a su aplicación.Después de leer este guía, sabrá: Cómo recibir correo electrónico dentro de una aplicación de Rails. Cómo configurar Action Mailbox. Cómo generar y enrutar correos electrónicos a un buzón. Cómo probar los correos electrónicos entrantes." />
  <meta property="og:description" content="NO LEA ESTE ARCHIVO EN GITHUB, LAS GUÍAS SE PUBLICAN EN https://guides.rubyonrails.org.Conceptos Básicos de Action MailboxEste guía le proporciona todo lo que necesita para comenzar a recibir correos electrónicos a su aplicación.Después de leer este guía, sabrá: Cómo recibir correo electrónico dentro de una aplicación de Rails. Cómo configurar Action Mailbox. Cómo generar y enrutar correos electrónicos a un buzón. Cómo probar los correos electrónicos entrantes." />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="Ruby on Rails Guides" />
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
  <meta property="og:type" content="website" />
</head>
<body class="guide">
  <div>
<!--    <img src="images/edge_badge.png" alt="edge-badge" id="edge-badge" />-->
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">Más en <a href="https://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        Más Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://weblog.rubyonrails.org/">Blog</a></li>
        <li class="more-info"><a href="https://guides.rubyonrails.org/">Guías</a></li>
        <li class="more-info"><a href="https://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="https://stackoverflow.com/questions/tagged/ruby-on-rails">Pedir Ayuda</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">Contribuir on GitHub</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Guías de Ruby on Rails">Guías de Ruby on Rails </a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Inicio</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">Index de Guías </a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
            <dl class="guides-section-container">
                <div class="guides-section">
                  <dt>Empieza Aqui</dt>
                  <dd><a href="getting_started.html">Introducción a Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Modelos</dt>
                  <dd><a href="active_record_basics.html">Conceptos básicos de Active Record</a></dd>
                  <dd><a href="active_record_migrations.html">Migraciones de Active Record</a></dd>
                  <dd><a href="active_record_validations.html">Validaciones de Active Record</a></dd>
                  <dd><a href="active_record_callbacks.html">Devolución (callbacks) de Llamadas de Active Record</a></dd>
                  <dd><a href="association_basics.html">Asociaciones de Active Record</a></dd>
                  <dd><a href="active_record_querying.html">Interfaz de Consulta de Active Record</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Vistas</dt>
                  <dd><a href="layouts_and_rendering.html">Diseños y Renderizado en Rails</a></dd>
                  <dd><a href="form_helpers.html">Ayudantes de Formulario de Action</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Controladores</dt>
                  <dd><a href="action_controller_overview.html">Descripción General de Action Controller</a></dd>
                  <dd><a href="routing.html">Rails Routing Desde el Exterior Hacia Adentro</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Otros Componentes</dt>
                  <dd><a href="active_support_core_extensions.html">Extensiones de Núcleo de Active Support</a></dd>
                  <dd><a href="action_mailer_basics.html">Conceptos Básicos de Action Mailer</a></dd>
                  <dd><a href="active_job_basics.html">Conceptos Básicos de Active Job</a></dd>
                  <dd><a href="active_storage_overview.html">Descripción General de Active Storage</a></dd>
                  <dd><a href="action_cable_overview.html">Descripción General de Action Cable</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Temas Avanzados</dt>
                  <dd><a href="i18n.html">Rails API de Internacionalización (I18n)</a></dd>
                  <dd><a href="testing.html">Prueba de Aplicaciones de Rails</a></dd>
                  <dd><a href="security.html">Seguridad de Aplicaciones Rails</a></dd>
                  <dd><a href="debugging_rails_applications.html">Depuración de Applications Rails</a></dd>
                  <dd><a href="configuring.html">Configuración de Aplicaciones de Rails</a></dd>
                  <dd><a href="command_line.html">La Línea de Comandos de Rails</a></dd>
                  <dd><a href="asset_pipeline.html">La Canalización de Activos (necesita traducción)</a></dd>
                  <dd><a href="autoloading_and_reloading_constants.html">Constantes de Autocarga y Recarga (Zeitwerk Mode)</a></dd>
                  <dd><a href="autoloading_and_reloading_constants_classic_mode.html">Constantes de Autocarga y Recarga (modo clásico)</a></dd>
                  <dd><a href="caching_with_rails.html">Almacenamiento en Caché con Rails Descripción General</a></dd>
                  <dd><a href="api_app.html">Uso de Rails para Aplicaciones Solo API</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Extending Rails  (toda la sección necesita traducción)</dt>
                  <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                  <dd><a href="generators.html">Creating and Customizing Rails Generators &amp; Templates</a></dd>
                </div>
            </dl>
          </div>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">Contribuir</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guides Index</option>
              <optgroup label="Empieza Aqui">
                  <option value="getting_started.html">Introducción a Rails</option>
              </optgroup>
              <optgroup label="Modelos">
                  <option value="active_record_basics.html">Conceptos básicos de Active Record</option>
                  <option value="active_record_migrations.html">Migraciones de Active Record</option>
                  <option value="active_record_validations.html">Validaciones de Active Record</option>
                  <option value="active_record_callbacks.html">Devolución (callbacks) de Llamadas de Active Record</option>
                  <option value="association_basics.html">Asociaciones de Active Record</option>
                  <option value="active_record_querying.html">Interfaz de Consulta de Active Record</option>
              </optgroup>
              <optgroup label="Vistas">
                  <option value="layouts_and_rendering.html">Diseños y Renderizado en Rails</option>
                  <option value="form_helpers.html">Ayudantes de Formulario de Action</option>
              </optgroup>
              <optgroup label="Controladores">
                  <option value="action_controller_overview.html">Descripción General de Action Controller</option>
                  <option value="routing.html">Rails Routing Desde el Exterior Hacia Adentro</option>
              </optgroup>
              <optgroup label="Otros Componentes">
                  <option value="active_support_core_extensions.html">Extensiones de Núcleo de Active Support</option>
                  <option value="action_mailer_basics.html">Conceptos Básicos de Action Mailer</option>
                  <option value="active_job_basics.html">Conceptos Básicos de Active Job</option>
                  <option value="active_storage_overview.html">Descripción General de Active Storage</option>
                  <option value="action_cable_overview.html">Descripción General de Action Cable</option>
              </optgroup>
              <optgroup label="Temas Avanzados">
                  <option value="i18n.html">Rails API de Internacionalización (I18n)</option>
                  <option value="testing.html">Prueba de Aplicaciones de Rails</option>
                  <option value="security.html">Seguridad de Aplicaciones Rails</option>
                  <option value="debugging_rails_applications.html">Depuración de Applications Rails</option>
                  <option value="configuring.html">Configuración de Aplicaciones de Rails</option>
                  <option value="command_line.html">La Línea de Comandos de Rails</option>
                  <option value="asset_pipeline.html">La Canalización de Activos (necesita traducción)</option>
                  <option value="autoloading_and_reloading_constants.html">Constantes de Autocarga y Recarga (Zeitwerk Mode)</option>
                  <option value="autoloading_and_reloading_constants_classic_mode.html">Constantes de Autocarga y Recarga (modo clásico)</option>
                  <option value="caching_with_rails.html">Almacenamiento en Caché con Rails Descripción General</option>
                  <option value="api_app.html">Uso de Rails para Aplicaciones Solo API</option>
              </optgroup>
              <optgroup label="Extending Rails  (toda la sección necesita traducción)">
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators &amp; Templates</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <p><strong>NO LEA ESTE ARCHIVO EN GITHUB, LAS GUÍAS SE PUBLICAN EN <a href="https://guides.rubyonrails.org">https://guides.rubyonrails.org</a>.</strong></p><h2>Conceptos Básicos de Action Mailbox</h2><p>Este guía le proporciona todo lo que necesita para comenzar a recibir
correos electrónicos a su aplicación.</p><p>Después de leer este guía, sabrá:</p>
<ul>
<li>Cómo recibir correo electrónico dentro de una aplicación de Rails.</li>
<li>Cómo configurar Action Mailbox.</li>
<li>Cómo generar y enrutar correos electrónicos a un buzón.</li>
<li>Cómo probar los correos electrónicos entrantes.</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#what-is-action-mailbox-questionmark">What is Action Mailbox?</a></li>
<li><a href="#setup">Setup</a></li>
<li>
<a href="#configuration">Configuration</a>

<ul>
<li><a href="#exim">Exim</a></li>
<li><a href="#mailgun">Mailgun</a></li>
<li><a href="#mandrill">Mandrill</a></li>
<li><a href="#postfix">Postfix</a></li>
<li><a href="#postmark">Postmark</a></li>
<li><a href="#qmail">Qmail</a></li>
<li><a href="#sendgrid">SendGrid</a></li>
</ul>
</li>
<li><a href="#examples">Examples</a></li>
<li><a href="#incineration-of-inboundemails">Incineration of InboundEmails</a></li>
<li><a href="#working-with-action-mailbox-in-development">Working with Action Mailbox in development</a></li>
<li><a href="#testing-mailboxes">Testing mailboxes</a></li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="what-is-action-mailbox-questionmark"><a class="anchorlink" href="#what-is-action-mailbox-questionmark">1 What is Action Mailbox?</a></h3><p>Action Mailbox enruta los correos electrónicos entrantes a buzones de correo tipo controlador para
procesamiento en Rails. Se envía con entradas para Mailgun, Mandrill, Postmark,
y SendGrid. También puede manejar correos entrantes directamente a través del Exim integrado,
Postfix y Qmail ingresa.</p><p>Los correos electrónicos entrantes se convierten en registros "InboundEmail" utilizando Active Record
y cuenta con seguimiento del ciclo de vida, almacenamiento del correo electrónico original en el almacenamiento en la nube
a través de Active Storage y el manejo responsable de datos con
en incineración por defecto.</p><p>Estos correos electrónicos entrantes se enrutan de forma asincrónica utilizando Active Job a uno o
varios buzones de correo dedicados, que son capaces de interactuar directamente
con el resto de su modelo de dominio.</p><h3 id="setup"><a class="anchorlink" href="#setup">2 Setup</a></h3><p>Instale las migraciones necesarias para <code>InboundEmail</code> y asegúrese de que Active Storage esté configurado:</p><div class="code_container">
<pre><code class="language-shell-session">$ bin/rails action_mailbox:install
$ bin/rails db:migrate
</code></pre>
</div>
<h3 id="configuration"><a class="anchorlink" href="#configuration">3 Configuration</a></h3><h4 id="exim"><a class="anchorlink" href="#exim">3.1 Exim</a></h4><p>Dile a Action Mailbox que acepte correos electrónicos de una retransmisión SMTP:</p><div class="code_container">
<pre><code class="language-ruby"># config/environments/production.rb
config.action_mailbox.ingress = :relay
</code></pre>
</div>
<p>Genere una contraseña segura que Action Mailbox pueda usar para autenticar las solicitudes al ingreso de retransmisión.</p><p>Use <code>bin/rails credentials:edit</code> para agregar la contraseña a las credenciales encriptadas de su aplicación en
<code>action_mailbox.ingress_password</code>, donde Action Mailbox la encontrará automáticamente:</p><div class="code_container">
<pre><code class="language-yaml">action_mailbox:
  ingress_password: ...
</code></pre>
</div>
<p>Alternativamente, proporcione la contraseña en el variable de entorno <code>RAILS_INBOUND_EMAIL_PASSWORD</code>.</p><p>Configure Exim para canalizar correos electrónicos entrantes a <code>bin/rails action_mailbox:ingress:exim</code>,
proporcionando la <code>URL</code> de la entrada del relé y la<code>INGRESS_PASSWORD</code>
generado previamente. Si su aplicación residía en <code>https://example.com</code>, el
comando completo se vería así:</p><div class="code_container">
<pre><code class="language-plain">bin/rails action_mailbox:ingress:exim URL=https://example.com/rails/action_mailbox/relay/inbound_emails INGRESS_PASSWORD=...
</code></pre>
</div>
<h4 id="mailgun"><a class="anchorlink" href="#mailgun">3.2 Mailgun</a></h4><p>Dale a Action Mailbox tu
Clave de firma de Mailgun (que puede encontrar en Configuración -&gt; Seguridad y usuarios -&gt; Seguridad de API en Mailgun)
para que pueda autenticar solicitudes al ingreso de Mailgun.</p><p>Use <code>bin / rails credentials: edit</code> para agregar su clave de firma a la
credenciales cifradas en <code>action_mailbox.mailgun_signing_key</code>,
donde Action Mailbox lo encontrará automáticamente:</p><div class="code_container">
<pre><code class="language-yaml">action_mailbox:
  mailgun_signing_key: ...
</code></pre>
</div>
<p>Alternativamente, proporcione su clave de firma en el entorno <code>MAILGUN_INGRESS_SIGNING_KEY</code>
variable.</p><p>Dile a Action Mailbox que acepte correos electrónicos de Mailgun:</p><div class="code_container">
<pre><code class="language-ruby"># config/environments/production.rb
config.action_mailbox.ingress = :mailgun
</code></pre>
</div>
<p><a href="https://documentation.mailgun.com/en/latest/user_manual.html#receiving-forwarding-and-storing-messages">Configure Mailgun</a>
para reenviar correos electrónicos entrantes a <code>/rails/action_mailbox/mailgun/inbound_emails/mime</code>.
Si su solicitud vive en <code>https://example.com</code>, usted especificaría el
URL totalmente calificado <code>https://example.com/rails/action_mailbox/mailgun/inbound_emails/mime</code>.</p><h4 id="mandrill"><a class="anchorlink" href="#mandrill">3.3 Mandrill</a></h4><p>Dé a Action Mailbox su clave API de Mandrill para que pueda autenticar solicitudes a
la entrada de Mandrill.</p><p>Use <code>bin/rails credentials:edit</code> para agregar su clave API a la de su aplicación
credenciales cifradas en <code>action_mailbox.mandrill_api_key</code>,
donde Action Mailbox lo encontrará automáticamente:</p><div class="code_container">
<pre><code class="language-yaml">action_mailbox:
  mandrill_api_key: ...
</code></pre>
</div>
<p>Alternativamente, proporcione su clave API en el <code>MANDRILL_INGRESS_API_KEY</code>
variable ambiental.</p><p>Dile a Action Mailbox que acepte correos electrónicos de Mandrill:</p><div class="code_container">
<pre><code class="language-ruby"># config/environments/production.rb
config.action_mailbox.ingress = :mandrill
</code></pre>
</div>
<p><a href="https://mandrill.zendesk.com/hc/en-us/articles/205583197-Inbound-Email-Processing-Overview">Configure Mandrill</a>
para enrutar correos electrónicos entrantes a <code>/rails/action_mailbox/mandrill/inbound_emails</code>.
Si su solicitud vive en <code>https://example.com</code>, usted especificaría el
URL totalmente calificado <code>https://example.com/rails/action_mailbox/mandrill/inbound_emails</code>.</p><h4 id="postfix"><a class="anchorlink" href="#postfix">3.4 Postfix</a></h4><p>Dile a Action Mailbox que acepte correos electrónicos de una retransmisión SMTP:</p><div class="code_container">
<pre><code class="language-ruby"># config/environments/production.rb
config.action_mailbox.ingress = :relay
</code></pre>
</div>
<p>Genere una contraseña segura que Action Mailbox pueda usar para autenticar las solicitudes al ingreso de retransmisión.</p><p>Use <code>bin/rails credentials:edit</code> para agregar la contraseña a las credenciales encriptadas de su aplicación en
<code>action_mailbox.ingress_password</code>, donde Action Mailbox la encontrará automáticamente:</p><div class="code_container">
<pre><code class="language-yaml">action_mailbox:
  ingress_password: ...
</code></pre>
</div>
<p>Alternativamente, proporcione la contraseña en la variable de entorno <code>RAILS_INBOUND_EMAIL_PASSWORD</code>.</p><p><a href="https://serverfault.com/questions/258469/how-to-configure-postfix-to-pipe-all-incoming-email-to-a-script">Configure Postfix</a>
para canalizar correos electrónicos entrantes a <code>bin/rails action_mailbox:ingress:postfix</code>, proporcionando
la <code>URL</code> de la entrada de Postfix y la<code>INGRESS_PASSWORD</code> que previamente
genero. Si su aplicación vive en <code>https: // example.com</code>, el comando completo
se vería así:</p><div class="code_container">
<pre><code class="language-plain">$ bin/rails action_mailbox:ingress:postfix URL=https://example.com/rails/action_mailbox/relay/inbound_emails INGRESS_PASSWORD=...
</code></pre>
</div>
<h4 id="postmark"><a class="anchorlink" href="#postmark">3.5 Postmark</a></h4><p>Dile a Action Mailbox que acepte correos electrónicos de matasellos:</p><div class="code_container">
<pre><code class="language-ruby"># config/environments/production.rb
config.action_mailbox.ingress = :postmark
</code></pre>
</div>
<p>Genere una contraseña segura que Action Mailbox pueda usar para autenticarse
solicitudes al ingreso del matasellos.</p><p>Use <code>bin/rails credentials:edit</code> para agregar la contraseña a la
credenciales cifradas en <code>action_mailbox.ingress_password</code>,
donde Action Mailbox lo encontrará automáticamente:</p><div class="code_container">
<pre><code class="language-yaml">action_mailbox:
  ingress_password: ...
</code></pre>
</div>
<p>Alternatively, provide the password in the <code>RAILS_INBOUND_EMAIL_PASSWORD</code>
environment variable.</p><p><a href="https://postmarkapp.com/manual#configure-your-inbound-webhook-url">Configure Postmark inbound webhook</a>
para reenviar correos electrónicos entrantes a <code>/rails/action_mailbox/postmark/inbound_emails</code> con el nombre de usuario <code>actionmailbox</code>
y la contraseña que generó anteriormente. Si su aplicación se encuentra en <code>https://example.com</code>,
configure Matasellos con la siguiente URL completa:</p><div class="code_container">
<pre><code class="language-plain">https://actionmailbox:PASSWORD@example.com/rails/action_mailbox/postmark/inbound_emails
</code></pre>
</div>
<div class="note"><p>Cuando configure su webhook entrante de Matasellos, asegúrese de marcar la casilla etiquetada <strong>"Incluir contenido de correo electrónico sin procesar en la carga útil JSON"</strong>.
Action Mailbox necesita el contenido de correo electrónico sin procesar para funcionar.</p></div><h4 id="qmail"><a class="anchorlink" href="#qmail">3.6 Qmail</a></h4><p>Dile a Action Mailbox que acepte correos electrónicos de una retransmisión SMTP:</p><div class="code_container">
<pre><code class="language-ruby"># config/environments/production.rb
config.action_mailbox.ingress = :relay
</code></pre>
</div>
<p>Genere una contraseña segura que Action Mailbox pueda usar para autenticar las solicitudes al ingreso de retransmisión.</p><p>Use <code>bin/rails credentials:edit</code> para agregar la contraseña a las credenciales encriptadas de su aplicación en
<code>action_mailbox.ingress_password</code>, donde Action Mailbox la encontrará automáticamente:</p><div class="code_container">
<pre><code class="language-yaml">action_mailbox:
  ingress_password: ...
</code></pre>
</div>
<p>Alternativamente, proporcione la contraseña en la variable de entorno <code>RAILS_INBOUND_EMAIL_PASSWORD</code>.</p><p>Configure Qmail para canalizar correos electrónicos entrantes a <code>bin/rails action_mailbox: ingress: mail</code>,
proporcionando la <code>URL</code> de la entrada del relé y la <code>INGRESS_PASSWORD</code>
generado previamente. Si su aplicación residía en <code>https://example.com</code>, el
comando completo se vería así:</p><div class="code_container">
<pre><code class="language-plain">bin/rails action_mailbox:ingress:qmail URL=https://example.com/rails/action_mailbox/relay/inbound_emails INGRESS_PASSWORD=...
</code></pre>
</div>
<h4 id="sendgrid"><a class="anchorlink" href="#sendgrid">3.7 SendGrid</a></h4><p>Dile a Action Mailbox que acepte correos electrónicos de SendGrid:</p><div class="code_container">
<pre><code class="language-ruby"># config/environments/production.rb
config.action_mailbox.ingress = :sendgrid
</code></pre>
</div>
<p>Genere una contraseña segura que Action Mailbox pueda usar para autenticarse
solicitudes a la entrada de SendGrid.</p><p>Use <code>bin/rails credentials:edit</code> para agregar la contraseña a la
credenciales cifradas en <code>action_mailbox.ingress_password</code>,
donde Action Mailbox lo encontrará automáticamente:</p><div class="code_container">
<pre><code class="language-yaml">action_mailbox:
  ingress_password: ...
</code></pre>
</div>
<p>Alternativamente, proporcione la contraseña en <code>RAILS_INBOUND_EMAIL_PASSWORD</code>
variable ambiental.</p><p><a href="https://sendgrid.com/docs/for-developers/parsing-email/setting-up-the-inbound-parse-webhook/">Configure SendGrid Inbound Parse</a>
para reenviar correos electrónicos entrantes a
<code>/rails/action_mailbox/sendgrid/inbound_emails</code> con el nombre de usuario<code>actionmailbox</code>
y la contraseña que generó anteriormente. Si su aplicación se encuentra en <code>https://example.com</code>,
configurarías SendGrid con la siguiente URL:</p><div class="code_container">
<pre><code class="language-plain">https://actionmailbox:PASSWORD@example.com/rails/action_mailbox/sendgrid/inbound_emails
</code></pre>
</div>
<div class="note"><p>Cuando configure su webhook SendGrid Inbound Parse, asegúrese de marcar la casilla con la etiqueta ** "Publicar el mensaje MIME completo y sin procesar". ** Action Mailbox necesita el mensaje MIME sin procesar para funcionar.</p></div><h3 id="examples"><a class="anchorlink" href="#examples">4 Examples</a></h3><p>Configure el enrutamiento básico:</p><div class="code_container">
<pre><code class="language-ruby"># app/mailboxes/application_mailbox.rb
class ApplicationMailbox &lt; ActionMailbox::Base
  routing /^save@/i     =&gt; :forwards
  routing /@replies\./i =&gt; :replies
end
</code></pre>
</div>
<p>Luego configura un buzón:</p><div class="code_container">
<pre><code class="language-ruby"># Generate new mailbox
$ bin/rails generate mailbox forwards
</code></pre>
</div>
<div class="code_container">
<pre><code class="language-ruby"># app/mailboxes/forwards_mailbox.rb
class ForwardsMailbox &lt; ApplicationMailbox
  # Callbacks specify prerequisites to processing
  before_processing :require_projects

  def process
    # Record the forward on the one project, or…
    if forwarder.projects.one?
      record_forward
    else
      # …involve a second Action Mailer to ask which project to forward into.
      request_forwarding_project
    end
  end

  private
    def require_projects
      if forwarder.projects.none?
        # Use Action Mailers to bounce incoming emails back to sender – this halts processing
        bounce_with Forwards::BounceMailer.no_projects(inbound_email, forwarder: forwarder)
      end
    end

    def record_forward
      forwarder.forwards.create subject: mail.subject, content: mail.content
    end

    def request_forwarding_project
      Forwards::RoutingMailer.choose_project(inbound_email, forwarder: forwarder).deliver_now
    end

    def forwarder
      @forwarder ||= User.find_by(email_address: mail.from)
    end
end
</code></pre>
</div>
<h3 id="incineration-of-inboundemails"><a class="anchorlink" href="#incineration-of-inboundemails">5 Incineration of InboundEmails</a></h3><p>De forma predeterminada, un InboundEmail que se haya procesado correctamente será
incinerado después de 30 días. Esto asegura que no está reteniendo los datos de las personas.
quiera o no después de que hayan cancelado sus cuentas o eliminado sus
contenido. La intención es que después de haber procesado un correo electrónico, debería haber
extrajo todos los datos que necesitaba y los convirtió en modelos de dominio y contenido
en su lado de la aplicación. El InboundEmail simplemente permanece en el sistema
por el tiempo extra para proporcionar opciones de depuración y forenses.</p><p>La incineración real se realiza a través del <code>IncinerationJob</code> que está programado
para ejecutarse después del tiempo de <code>config.action_mailbox.incinerate_after</code>. Este valor es
por defecto establecido en <code>30.days</code>, pero puede cambiarlo en su producción.rb
configuración. (Tenga en cuenta que esta programación de incineración en el futuro lejano se basa en
su cola de trabajos puede retener trabajos durante tanto tiempo).</p><h3 id="working-with-action-mailbox-in-development"><a class="anchorlink" href="#working-with-action-mailbox-in-development">6 Working with Action Mailbox in development</a></h3><p>Es útil poder probar los correos electrónicos entrantes en desarrollo sin realmente
enviar y recibir correos electrónicos reales. Para lograr esto, hay un director
controlador montado en <code>/rails/conductor/action_mailbox/inbound_emails</code>,
que le da un índice de todos los InboundEmails en el sistema, su
estado de procesamiento y un formulario para crear un nuevo InboundEmail también.</p><h3 id="testing-mailboxes"><a class="anchorlink" href="#testing-mailboxes">7 Testing mailboxes</a></h3><p>Ejemplo:</p><div class="code_container">
<pre><code class="language-ruby">class ForwardsMailboxTest &lt; ActionMailbox::TestCase
  test "directly recording a client forward for a forwarder and forwardee corresponding to one project" do
    assert_difference -&gt; { people(:david).buckets.first.recordings.count } do
      receive_inbound_email_from_mail \
        to: 'save@example.com',
        from: people(:david).email_address,
        subject: "Fwd: Status update?",
        body: &lt;&lt;~BODY
          --- Begin forwarded message ---
          From: Frank Holland &lt;frank@microsoft.com&gt;

          What's the status?
        BODY
    end

    recording = people(:david).buckets.first.recordings.last
    assert_equal people(:david), recording.creator
    assert_equal "Status update?", recording.forward.subject
    assert_match "What's the status?", recording.forward.content.to_s
  end
end
</code></pre>
</div>


        <h3>Comentarios Sobre el Contenido</h3>
        <p>
          Las guías de rieles se administran y publican en latinadeveloper/railsguides.es en GitHub.
        </p>
        <p>
          Si lee esta guía y encuentra algún texto o código incorrecto que le interese, no dude en enviar una solicitud de extracción en el repositorio anterior.

          Consulte el archivo README en GitHub para saber cómo enviar una solicitud de extracción.
          Please contribute if you see any typos or factual errors.
        </p>

      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> License</p>
<p>"Rails", "Ruby on Rails", and the Rails logo are trademarks of David Heinemeier Hansson. All rights reserved.</p>

    </div>
  </div>
</body>
</html>
